name: 'Code Lines Counter'
description: 'Count lines of code'
inputs:
  include-files:
    description: 'Count lines in files (posix-egrep regex)'
    required: true
    default: '.*\**'
  exclude-files:
    description: 'Do not count lines in files (posix-egrep regex)'
    required: true
    default: ''
runs:
  using: "composite"
  steps:

    - name: Count lines of code
      id: counter
#      run: count.sh $INCLUDE_FILES $EXCLUDE_FILES
      run: $GITHUB_ACTION_PATH/count.sh $INCLUDE_FILES $EXCLUDE_FILES
      shell: bash
      env:
        INCLUDE_FILES: ${{ inputs.include-files }}
        EXCLUDE_FILES: ${{ inputs.exclude-files }}

    - name: Deploy to image-data branch
      uses: peaceiris/actions-gh-pages@v3.9.3
      with:
        publish_dir: ./output
        publish_branch: image-data
        github_token: ${{ github.token }}

